tinymce.PluginManager.add("faicon",function(n,t){function i(n){return function(){var i=new XMLHttpRequest;i.overrideMimeType("application/json");i.open("GET",t+"/icons.json",!0);i.onreadystatechange=function(){i.readyState===4&&i.status=="200"&&n(i.responseText)};i.send(null)}}function r(t){function h(n){var t,u,r,i;for(gridHtml='<table id="iconspanel" role="presentation" cellspacing="0" class="mce-charmap"><tbody>',t=Math.min(n.length,25),u=Math.ceil(n.length/t),y=0;y<u;y++){for(gridHtml+="<tr>",x=0;x<t;x++)r=y*t+x,r<n.length?(i=n[r],gridHtml+='<td title="'+i.id+'" style="text-align: center; padding: 2px; border: none;"><span class="fa fa-'+i.id+'" title="'+i.name+'" style="font-size: 18px;"><\/span><\/td>'):gridHtml+='<td style="border: none;" />';gridHtml+="<\/tr>"}return gridHtml+="<\/tbody><\/table>"}function o(){var n=e;return i!==undefined&&i!==null&&i!==""&&i.length>3&&(n=e.filter(function(n){if(n.categories.includes(i))return n})),r!==undefined&&r!==null&&r!==""&&(n=n.filter(function(n){var t=!1,i=!1;return n.filter!==undefined&&n.filter!==null&&n.filter!==""&&(t=n.filter.map(n=>n.toLowerCase()).includes(r.toLowerCase())),n.name!==undefined&&n.name!==""&&n.name.length>0&&(i=n.name.toLowerCase().includes(r.toLowerCase())),t||i?n:void 0})),h(n)}function c(n){i=n.control.value();var t=f.find("#iconspanel");t[0].getEl().innerHTML=o()}function l(n){r=n.control.value();var t=f.find("#iconspanel");t[0].getEl().innerHTML=o()}var f,i,r,e=tinymce.util.JSON.parse(t),s;if(!e||e.length===0){s=n.translate("No icons found.");n.notificationManager.open({text:s,type:"info"});return}f=n.windowManager.open({title:"Insert icon",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"listbox",label:"Icon categories",name:"categories",onselect:c,values:[{text:"All Categories",value:""},{text:"Accessibility Icons",value:"Accessibility Icons"},{text:"Brand Icons",value:"Brand Icons"},{text:"Chart Icons",value:"Chart Icons"},{text:"Accessibility Icons",value:"Accessibility Icons"},{text:"Currency Icons",value:"Currency Icons"},{text:"Directional Icons",value:"Directional Icons"},{text:"File Type Icons",value:"File Type Icons"},{text:"Form Control Icons",value:"Form Control Icons"},{text:"Gender Icons",value:"Gender Icons"},{text:"Hand Icons",value:"Hand Icons"},{text:"Payment Icons",value:"Payment Icons"},{text:"Spinner Icons",value:"Spinner Icons"},{text:"Text Editor Icons",value:"Text Editor Icons"},{text:"Transportation Icons",value:"Transportation Icons"},{text:"Video Player Icons",value:"Video Player Icons"},{text:"Web Application Icons",value:"Web Application Icons"},]},{type:"textbox",name:"icon-name",placeholder:"Type icon name...",disabled:!1,maximized:!1,onkeyup:l}]},{type:"container",name:"iconspanel",html:o(),onclick:function(t){var i=t.target,r,e;i.removeAttribute("title");i.removeAttribute("style");r=n.selection.getNode();r.hasAttribute("contenteditable")&&(e=r.getAttribute("contenteditable"),e==="false"&&i.setAttribute("contenteditable",!1));u(i.outerHTML);t.ctrlKey||f.close()}}],buttons:[],minWidth:720,minHeight:300})}function u(t){var i=n.selection.getNode();i.innerHTML.length==0?i.outerHTML=t:(n.selection.getNode().textContent===""&&(t+="&nbsp;"),n.execCommand("mceInsertContent",!1,t))}n.addButton("faicon",{text:"Insert icon",tooltip:"Insert icon",icon:!1,onclick:i(r)});n.addMenuItem("faicon",{icon:"info",text:"Insert icon",onclick:i(r),context:"insert"})});